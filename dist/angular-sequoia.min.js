!function(){"use strict";angular.module("ngSequoia",[])}(),function(){"use strict";function e(e,t,r){if(t!==t)return n(e,r);for(var a=r-1,o=e.length;++a<o;)if(e[a]===t)return a;return-1}function t(e){return null==e?"":e+""}function n(e,t,n){for(var r=e.length,a=t+(n?0:-1);n?a--:++a<r;){var o=e[a];if(o!==o)return a}return-1}function r(e){return!!e&&"object"==typeof e}function a(){}function o(e){var t=e?e.length:0;for(this.data={hash:Et(null),set:new Ot};t--;)this.push(e[t])}function u(e,t){var n=e.data,r="string"==typeof t||ce(t)?n.set.has(t):n.hash[t];return r?0:-1}function i(e){var t=this.data;"string"==typeof e||ce(e)?t.set.add(e):t.hash[e]=!0}function c(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function l(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function s(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function f(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function d(e,t){return null==t?e:p(t,zt(t),e)}function p(e,t,n){n||(n={});for(var r=-1,a=t.length;++r<a;){var o=t[r];n[o]=e[o]}return n}function h(e,t,n){var r=typeof e;return"function"==r?t===Ae?e:I(e,t,n):null==e?be:"object"==r?A(e):t===Ae?Se(e):w(e,t)}function g(e,t,n,r,a,o,u){var i;if(n&&(i=a?n(e,r,a):n(e)),i!==Ae)return i;if(!ce(e))return e;var s=Wt(e);if(s){if(i=D(e),!t)return c(e,i)}else{var f=At.call(e),p=f==Ne;if(f!=Ue&&f!=ke&&(!p||a))return ut[f]?W(e,f,t):a?e:{};if(gt(e))return a?e:{};if(i=H(p?{}:e),!t)return d(i,e)}o||(o=[]),u||(u=[]);for(var h=o.length;h--;)if(o[h]==e)return u[h];return o.push(e),u.push(i),(s?l:y)(e,function(r,a){i[a]=g(r,t,n,a,e,o,u)}),i}function v(e,t,n,a){a||(a=[]);for(var o=-1,u=e.length;++o<u;){var i=e[o];r(i)&&z(i)&&(n||Wt(i)||ue(i))?t?v(i,t,n,a):s(a,i):n||(a[a.length]=i)}return a}function y(e,t){return Gt(e,t,zt)}function m(e,t,n){if(null!=e){e=ee(e),n!==Ae&&n in e&&(t=[n]);for(var r=0,a=t.length;null!=e&&a>r;)e=ee(e)[t[r++]];return r&&r==a?e:Ae}}function b(e,t,n,a,o,u){return e===t?!0:null==e||null==t||!ce(e)&&!r(t)?e!==e&&t!==t:j(e,t,b,n,a,o,u)}function j(e,t,n,r,a,o,u){var i=Wt(e),c=Wt(t),l=Ee,s=Ee;i||(l=At.call(e),l==ke?l=Ue:l!=Ue&&(i=de(e))),c||(s=At.call(t),s==ke?s=Ue:s!=Ue&&(c=de(t)));var f=l==Ue&&!gt(e),d=s==Ue&&!gt(t),p=l==s;if(p&&!i&&!f)return F(e,t,l);if(!a){var h=f&&St.call(e,"__wrapped__"),g=d&&St.call(t,"__wrapped__");if(h||g)return n(h?e.value():e,g?t.value():t,r,a,o,u)}if(!p)return!1;o||(o=[]),u||(u=[]);for(var v=o.length;v--;)if(o[v]==e)return u[v]==t;o.push(e),u.push(t);var y=(i?R:L)(e,t,n,r,a,o,u);return o.pop(),u.pop(),y}function S(e,t,n){var r=t.length,a=r,o=!n;if(null==e)return!a;for(e=ee(e);r--;){var u=t[r];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<a;){u=t[r];var i=u[0],c=e[i],l=u[1];if(o&&u[2]){if(c===Ae&&!(i in e))return!1}else{var s=n?n(c,l,i):Ae;if(!(s===Ae?b(l,c,n,!0):s))return!1}}return!0}function A(e){var t=V(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:(e=ee(e),e[n]===r&&(r!==Ae||n in e))}}return function(e){return S(e,t)}}function w(e,t){var n=Wt(e),r=Q(e)&&Y(t),a=e+"";return e=te(e),function(o){if(null==o)return!1;var u=a;if(o=ee(o),(n||!r)&&!(u in o)){if(o=1==e.length?o:m(o,O(e,0,-1)),null==o)return!1;u=re(e),o=ee(o)}return o[u]===t?t!==Ae||u in o:b(t,o[u],Ae,!0)}}function q(e){return function(t){return null==t?Ae:ee(t)[e]}}function x(e){var t=e+"";return e=te(e),function(n){return m(n,e,t)}}function O(e,t,n){var r=-1,a=e.length;t=null==t?0:+t||0,0>t&&(t=-t>a?0:a+t),n=n===Ae||n>a?a:+n||0,0>n&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}function _(e,t){var n;return Vt(e,function(e,r,a){return n=t(e,r,a),!n}),!!n}function k(t,n){var r=-1,a=B(),o=t.length,i=a===e,c=i&&o>=Oe,l=c?U():null,s=[];l?(a=u,i=!1):(c=!1,l=n?[]:s);e:for(;++r<o;){var f=t[r],d=n?n(f,r,t):f;if(i&&f===f){for(var p=l.length;p--;)if(l[p]===d)continue e;n&&l.push(d),s.push(f)}else a(l,d,0)<0&&((n||c)&&l.push(d),s.push(f))}return s}function E(e,t){for(var n=-1,r=t.length,a=Array(r);++n<r;)a[n]=e[t[n]];return a}function $(e,t,n){var r=0,a=e?e.length:r;if("number"==typeof t&&t===t&&Rt>=a){for(;a>r;){var o=r+a>>>1,u=e[o];(n?t>=u:t>u)&&null!==u?r=o+1:a=o}return a}return C(e,t,be,n)}function C(e,t,n,r){t=n(t);for(var a=0,o=e?e.length:0,u=t!==t,i=null===t,c=t===Ae;o>a;){var l=$t((a+o)/2),s=n(e[l]),f=s!==Ae,d=s===s;if(u)var p=d||r;else p=i?d&&f&&(r||null!=s):c?d&&(r||f):null==s?!1:r?t>=s:t>s;p?a=l+1:o=l}return Pt(o,Ut)}function I(e,t,n){if("function"!=typeof e)return be;if(t===Ae)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,o){return e.call(t,n,r,a,o)};case 5:return function(n,r,a,o,u){return e.call(t,n,r,a,o,u)}}return function(){return e.apply(t,arguments)}}function N(e){var t=new qt(e.byteLength),n=new kt(t);return n.set(new kt(e)),t}function P(e,t){return function(n,r){var a=n?Dt(n):0;if(!X(a))return e(n,r);for(var o=t?a:-1,u=ee(n);(t?o--:++o<a)&&r(u[o],o,u)!==!1;);return n}}function T(e){return function(t,n,r){for(var a=ee(t),o=r(t),u=o.length,i=e?u:-1;e?i--:++i<u;){var c=o[i];if(n(a[c],c,a)===!1)break}return t}}function U(e){return Et&&Ot?new o(e):null}function R(e,t,n,r,a,o,u){var i=-1,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;for(;++i<c;){var s=e[i],d=t[i],p=r?r(a?d:s,a?s:d,i):Ae;if(p!==Ae){if(p)continue;return!1}if(a){if(!f(t,function(e){return s===e||n(s,e,r,a,o,u)}))return!1}else if(s!==d&&!n(s,d,r,a,o,u))return!1}return!0}function F(e,t,n){switch(n){case $e:case Ce:return+e==+t;case Ie:return e.name==t.name&&e.message==t.message;case Te:return e!=+e?t!=+t:e==+t;case Re:case Le:return e==t+""}return!1}function L(e,t,n,r,a,o,u){var i=zt(e),c=i.length,l=zt(t),s=l.length;if(c!=s&&!a)return!1;for(var f=c;f--;){var d=i[f];if(!(a?d in t:St.call(t,d)))return!1}for(var p=a;++f<c;){d=i[f];var h=e[d],g=t[d],v=r?r(a?g:h,a?h:g,d):Ae;if(!(v===Ae?n(h,g,r,a,o,u):v))return!1;p||(p="constructor"==d)}if(!p){var y=e.constructor,m=t.constructor;if(y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m))return!1}return!0}function M(e,t,n){var r=a.callback||me;return r=r===me?h:r,n?r(e,t,n):r}function B(t,n,r){var o=a.indexOf||ne;return o=o===ne?e:o,t?o(t,n,r):o}function V(e){for(var t=ge(e),n=t.length;n--;)t[n][2]=Y(t[n][1]);return t}function G(e,t){var n=null==e?Ae:e[t];return le(n)?n:Ae}function D(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&St.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function H(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function W(e,t,n){var r=e.constructor;switch(t){case Be:return N(e);case $e:case Ce:return new r(+e);case Ve:case Ge:case De:case He:case We:case ze:case Je:case Ke:case Qe:r instanceof r&&(r=Lt[t]);var a=e.buffer;return new r(n?N(a):a,e.byteOffset,e.length);case Te:case Le:return new r(e);case Re:var o=new r(e.source,tt.exec(e));o.lastIndex=e.lastIndex}return o}function z(e){return null!=e&&X(Dt(e))}function J(e,t){return e="number"==typeof e||rt.test(e)?+e:-1,t=null==t?Ft:t,e>-1&&e%1==0&&t>e}function K(e,t,n){if(!ce(n))return!1;var r=typeof t;if("number"==r?z(n)&&J(t,n.length):"string"==r&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function Q(e,t){var n=typeof e;if("string"==n&&Ye.test(e)||"number"==n)return!0;if(Wt(e))return!1;var r=!Xe.test(e);return r||null!=t&&e in ee(t)}function X(e){return"number"==typeof e&&e>-1&&e%1==0&&Ft>=e}function Y(e){return e===e&&!ce(e)}function Z(e){for(var t=he(e),n=t.length,r=n&&e.length,a=!!r&&X(r)&&(Wt(e)||ue(e)||fe(e)),o=-1,u=[];++o<n;){var i=t[o];(a&&J(i,r)||St.call(e,i))&&u.push(i)}return u}function ee(e){if(a.support.unindexedChars&&fe(e)){for(var t=-1,n=e.length,r=Object(e);++t<n;)r[t]=e.charAt(t);return r}return ce(e)?e:Object(e)}function te(e){if(Wt(e))return e;var n=[];return t(e).replace(Ze,function(e,t,r,a){n.push(r?a.replace(et,"$1"):t||e)}),n}function ne(t,n,r){var a=t?t.length:0;if(!a)return-1;if("number"==typeof r)r=0>r?Nt(a+r,0):r;else if(r){var o=$(t,n);return a>o&&(n===n?n===t[o]:t[o]!==t[o])?o:-1}return e(t,n,r||0)}function re(e){var t=e?e.length:0;return t?e[t-1]:Ae}function ae(e,t,n){var r=Wt(e)?f:_;return n&&K(e,t,n)&&(t=Ae),("function"!=typeof t||n!==Ae)&&(t=M(t,n,3)),r(e,t)}function oe(e,t){if("function"!=typeof e)throw new TypeError(_e);return t=Nt(t===Ae?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,a=Nt(n.length-t,0),o=Array(a);++r<a;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var u=Array(t+1);for(r=-1;++r<t;)u[r]=n[r];return u[t]=o,e.apply(this,u)}}function ue(e){return r(e)&&z(e)&&St.call(e,"callee")&&!xt.call(e,"callee")}function ie(e){return ce(e)&&At.call(e)==Ne}function ce(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function le(e){return null==e?!1:ie(e)?wt.test(jt.call(e)):r(e)&&(gt(e)?wt:nt).test(e)}function se(e){return ce(e)&&At.call(e)==Re}function fe(e){return"string"==typeof e||r(e)&&At.call(e)==Le}function de(e){return r(e)&&X(e.length)&&!!ot[At.call(e)]}function pe(e,t){if(null==e)return!1;var n=St.call(e,t);if(!n&&!Q(t)){if(t=te(t),e=1==t.length?e:m(e,O(t,0,-1)),null==e)return!1;t=re(t),n=St.call(e,t)}return n||X(e.length)&&J(t,e.length)&&(Wt(e)||ue(e)||fe(e))}function he(e){if(null==e)return[];ce(e)||(e=Object(e));var t=e.length,n=a.support;t=t&&X(t)&&(Wt(e)||ue(e)||fe(e))&&t||0;for(var r=e.constructor,o=-1,u=ie(r)&&r.prototype||mt,i=u===e,c=Array(t),l=t>0,s=n.enumErrorProps&&(e===yt||e instanceof Error),f=n.enumPrototypes&&ie(e);++o<t;)c[o]=o+"";for(var d in e)f&&"prototype"==d||s&&("message"==d||"name"==d)||l&&J(d,t)||"constructor"==d&&(i||!St.call(e,d))||c.push(d);if(n.nonEnumShadows&&e!==mt){var p=e===bt?Le:e===yt?Ie:At.call(e),h=Mt[p]||Mt[Ue];for(p==Ue&&(u=mt),t=at.length;t--;){d=at[t];var g=h[d];i&&g||(g?!St.call(e,d):e[d]===u[d])||c.push(d)}}return c}function ge(e){e=ee(e);for(var t=-1,n=zt(e),r=n.length,a=Array(r);++t<r;){var o=n[t];a[t]=[o,e[o]]}return a}function ve(e){return E(e,zt(e))}function ye(e,n,r){r&&K(e,n,r)&&(n=Ae);var a=qe,o=xe;if(null!=n)if(ce(n)){var u="separator"in n?n.separator:u;a="length"in n?+n.length||0:a,o="omission"in n?t(n.omission):o}else a=+n||0;if(e=t(e),a>=e.length)return e;var i=a-o.length;if(1>i)return o;var c=e.slice(0,i);if(null==u)return c+o;if(se(u)){if(e.slice(i).search(u)){var l,s,f=e.slice(0,i);for(u.global||(u=RegExp(u.source,(tt.exec(u)||"")+"g")),u.lastIndex=0;l=u.exec(f);)s=l.index;c=c.slice(0,null==s?i:s)}}else if(e.indexOf(u,i)!=i){var d=c.lastIndexOf(u);d>-1&&(c=c.slice(0,d))}return c+o}function me(e,t,n){return n&&K(e,t,n)&&(t=Ae),r(e)?je(e):h(e,t)}function be(e){return e}function je(e){return A(g(e,!0))}function Se(e){return Q(e)?q(e):x(e)}var Ae,we="3.10.1",qe=30,xe="...",Oe=200,_e="Expected a function",ke="[object Arguments]",Ee="[object Array]",$e="[object Boolean]",Ce="[object Date]",Ie="[object Error]",Ne="[object Function]",Pe="[object Map]",Te="[object Number]",Ue="[object Object]",Re="[object RegExp]",Fe="[object Set]",Le="[object String]",Me="[object WeakMap]",Be="[object ArrayBuffer]",Ve="[object Float32Array]",Ge="[object Float64Array]",De="[object Int8Array]",He="[object Int16Array]",We="[object Int32Array]",ze="[object Uint8Array]",Je="[object Uint8ClampedArray]",Ke="[object Uint16Array]",Qe="[object Uint32Array]",Xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ye=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,et=/\\(\\)?/g,tt=/\w*$/,nt=/^\[object .+?Constructor\]$/,rt=/^\d+$/,at=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ot={};ot[Ve]=ot[Ge]=ot[De]=ot[He]=ot[We]=ot[ze]=ot[Je]=ot[Ke]=ot[Qe]=!0,ot[ke]=ot[Ee]=ot[Be]=ot[$e]=ot[Ce]=ot[Ie]=ot[Ne]=ot[Pe]=ot[Te]=ot[Ue]=ot[Re]=ot[Fe]=ot[Le]=ot[Me]=!1;var ut={};ut[ke]=ut[Ee]=ut[Be]=ut[$e]=ut[Ce]=ut[Ve]=ut[Ge]=ut[De]=ut[He]=ut[We]=ut[Te]=ut[Ue]=ut[Re]=ut[Le]=ut[ze]=ut[Je]=ut[Ke]=ut[Qe]=!0,ut[Ie]=ut[Ne]=ut[Pe]=ut[Fe]=ut[Me]=!1;var it={"function":!0,object:!0},ct=it[typeof exports]&&exports&&!exports.nodeType&&exports,lt=it[typeof module]&&module&&!module.nodeType&&module,st=ct&&lt&&"object"==typeof global&&global&&global.Object&&global,ft=it[typeof self]&&self&&self.Object&&self,dt=it[typeof window]&&window&&window.Object&&window,pt=lt&&lt.exports===ct&&ct,ht=st||dt!==(this&&this.window)&&dt||ft||this,gt=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),vt=Array.prototype,yt=Error.prototype,mt=Object.prototype,bt=String.prototype,jt=Function.prototype.toString,St=mt.hasOwnProperty,At=mt.toString,wt=RegExp("^"+jt.call(St).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=ht.ArrayBuffer,xt=mt.propertyIsEnumerable,Ot=G(ht,"Set"),_t=vt.splice,kt=ht.Uint8Array,Et=G(Object,"create"),$t=Math.floor,Ct=G(Array,"isArray"),It=G(Object,"keys"),Nt=Math.max,Pt=Math.min,Tt=4294967295,Ut=Tt-1,Rt=Tt>>>1,Ft=9007199254740991,Lt={};Lt[Ve]=ht.Float32Array,Lt[Ge]=ht.Float64Array,Lt[De]=ht.Int8Array,Lt[He]=ht.Int16Array,Lt[We]=ht.Int32Array,Lt[ze]=kt,Lt[Je]=ht.Uint8ClampedArray,Lt[Ke]=ht.Uint16Array,Lt[Qe]=ht.Uint32Array;var Mt={};Mt[Ee]=Mt[Ce]=Mt[Te]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Mt[$e]=Mt[Le]={constructor:!0,toString:!0,valueOf:!0},Mt[Ie]=Mt[Ne]=Mt[Re]={constructor:!0,toString:!0},Mt[Ue]={constructor:!0},l(at,function(e){for(var t in Mt)if(St.call(Mt,t)){var n=Mt[t];n[e]=St.call(n,e)}});var Bt=a.support={};!function(e){var t=function(){this.x=e},n={0:e,length:e},r=[];t.prototype={valueOf:e,y:e};for(var a in new t)r.push(a);Bt.enumErrorProps=xt.call(yt,"message")||xt.call(yt,"name"),Bt.enumPrototypes=xt.call(t,"prototype"),Bt.nonEnumShadows=!/valueOf/.test(r),Bt.spliceObjects=(_t.call(n,0,1),!n[0]),Bt.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var Vt=P(y),Gt=T(),Dt=q("length"),Ht=oe(function(e){return k(v(e,!1,!0))}),Wt=Ct||function(e){return r(e)&&X(e.length)&&At.call(e)==Ee},zt=It?function(e){var t=null==e?Ae:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?a.support.enumPrototypes:z(e))?Z(e):ce(e)?It(e):[]}:Z;o.prototype.push=i,a.callback=me,a.keys=zt,a.keysIn=he,a.matches=je,a.pairs=ge,a.property=Se,a.restParam=oe,a.union=Ht,a.values=ve,a.iteratee=me,a.has=pe,a.identity=be,a.indexOf=ne,a.isArguments=ue,a.isArray=Wt,a.isFunction=ie,a.isNative=le,a.isObject=ce,a.isRegExp=se,a.isString=fe,a.isTypedArray=de,a.last=re,a.some=ae,a.trunc=ye,a.any=ae,a.VERSION=we,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ht._=a,define(function(){return a})):ct&&lt?pt?(lt.exports=a)._=a:ct._=a:ht._=a}.call(this),function(){"use strict";function e(){return{restrict:"AE",replace:!0,templateUrl:"sequoia-search.html",scope:{tree:"=",isSearching:"="},link:function(e,t,n){e.search=function(){e.query.length?(e.isSearching=e.query?!0:!1,e.tree.setCurrentNodes(e.tree.find(e.tree.template.title,e.query))):e.clear()},e.clear=function(){e.query="",e.isSearching=!1,e.tree.setCurrentNodes()}}}}angular.module("ngSequoia").directive("sequoiaSearch",e)}(),function(){"use strict";function e(e){return{restrict:"AE",replace:!0,templateUrl:"angular-sequoia.html",scope:{treeNodes:"=sequoiaTree",model:"=",template:"=nodeTemplate"},link:function(t,n,r){t.model=_.isArray(t.model)?t.model:[],t.breadcrumbs=[];var a=new e(t.treeNodes,t.template);t.load=function(e){a.isValidNode(e)?(a.setCurrentNodes(e[a.template.nodes]),t.breadcrumbs=a.breadcrumbs(e[a.template.id])):(a.setCurrentNodes(),t.breadcrumbs=[])},t.select=function(e){e._id&&t.model.push(e[a.template.id])},t.remove=function(e){var n=e._id?_.indexOf(t.model,e[a.template.id]):-1;-1!==n&&t.model.splice(n,1)},t.isSelected=function(e){return-1!==_.indexOf(t.model,e[a.template.id])?!0:!1},t.toggleSelected=function(){if(t.onlySelected)t.onlySelected=!1,a.setCurrentNodes();else{t.onlySelected=!0;var e=a.findSelected(t.model);a.setCurrentNodes(e)}},t.tree=a,t.load()}}}e.$inject=["SequoiaTree"],angular.module("ngSequoia").directive("sequoiaTree",e)}(),function(){"use strict";function e(e){var t,n,r,a,o,u,i=function(e,n){var r={id:"_id",nodes:"nodes",title:"title"};this.template=n||r,this.tree=t(_.isArray(e)?e[0]:[],this.template)?e:[]};return t=function(t,n){for(var r=_.values(n),a=0;a<r.length;a++)if(!_.has(t,r[a]))return e.warn("The node structure is not valid!"),!1;return!0},n=function(e,t,r,a){return _.isArray(e)?_.some(e,function(e){return e[t]===r?!0:n(e[a.nodes],t,r,a)}):!1},r=function(e,t,n,a,o){if(_.isArray(e))for(var u=0;u<e.length;u++)e[u][t].toLowerCase().indexOf(n.toLowerCase())>-1&&a.push(e[u]),r(e[u][o.nodes],t,n,a,o);return a},a=function(e,t,r,o){t=t||[];var u={};u[o.title]="Root",r=r.length?r:[u];for(var i=0;i<t.length;i++)(t[i][o.id]===e||n(t[i][o.nodes],o.id,e,o))&&r.push(t[i]),a(e,t[i][o.nodes],r,o);return r},o=function(e,t,r,a){t=t||[];for(var u=0;u<t.length;u++)(t[u][a.id]===e[a.id]||n(t[u][a.nodes],a.id,e[a.id],a))&&(r+=r.length?" > ":"",r+=_.trunc(t[u][a.title],20)),r=o(e,t[u][a.nodes],r,a);return r},u=function(e,t,n,r){if(_.isArray(t))for(var a=0;a<t.length;a++)t[a]._id===e&&n.push(t[a]),u(e,t[a][r.nodes],n,r);return n},i.prototype.setCurrentNodes=function(e){this.nodes=_.isArray(e)?e:this.tree},i.prototype.isValidNode=function(e){return _.isObject(e)&&e[this.template.nodes]},i.prototype.breadcrumbs=function(e){return a(e,this.tree,[],this.template)},i.prototype.find=function(e,t){return r(this.tree,e,t,[],this.template)},i.prototype.findSelected=function(e){for(var t=[],n=[],r=0;r<e.length;r++)t=_.union(t,u(e[r],this.tree,[],this.template));for(var r=0;r<t.length;r++){var a={};a[this.template.id]=t[r][this.template.id],a[this.template.title]=o(t[r],this.tree,"",this.template),n.push(a)}return console.log(n),n},i}e.$inject=["$log"],angular.module("ngSequoia").factory("SequoiaTree",e)}(),angular.module("ngSequoia").run(["$templateCache",function(e){e.put("angular-sequoia.html",'<div class="sequoia" data-ng-show="tree.tree.length">\n\n  <div class="sequoia-search">\n    <div class="sequoia-search-form" data-sequoia-search data-is-searching="searchEnabled" data-tree="tree"></div>\n    <div class="sequoia-actions" data-ng-if="model.length">\n      <ul>\n        <li><a class="sequoia-button sequoia-button-info" href="" data-ng-click="toggleSelected()">{{onlySelected ? \'Hide selected\' : \'Show selected\'}}</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <ul data-ng-if="!searchEnabled && !onlySelected" class="sequoia-breadcrumbs" data-ng-include="\'sequoia-breadcrumbs.html\'"></ul>\n\n  <ul class="sequoia-tree">\n    <li data-ng-repeat="node in tree.nodes track by node[tree.template.id]">\n      <span class="sequoia-item-title" data-ng-bind="node[tree.template.title]"></span>\n      <span class="sequoia-item-actions">\n        <span data-ng-if="isSelected(node)">\n          <a class="sequoia-button sequoia-button-danger" href="" title="Remove" data-ng-click="remove(node)">Remove</a>\n        </span>\n        <span data-ng-if="!isSelected(node)">\n          <a class="sequoia-button sequoia-button-primary" href="" title="Select" data-ng-click="select(node)">Select</a>\n        </span>\n        <span data-ng-if="node[tree.template.nodes]">\n          <a class="sequoia-button sequoia-button-info" href="" title="Go to subitems" data-ng-click="load(node)">Go to subitems</a>\n        </span>\n      </span>\n    </li>\n  </ul>\n</div>\n'),e.put("sequoia-breadcrumbs.html",'<li data-ng-if="breadcrumbs.length" data-ng-repeat="link in breadcrumbs" data-ng-class="$last ? \'last\' : \'\'">\n  <a data-ng-if="!$last" href="" data-ng-click="load(link)" data-ng-bind="link[tree.template.title]"></a>\n  <span data-ng-if="$last" data-ng-bind="link[tree.template.title]"></span>\n</li>'),e.put("sequoia-search.html",'<form data-ng-submit="search()">\n  <input type="text" placeholder="Search for an item by {{tree.template.title}}" data-ng-model="query" name="search" />\n  <a class="sequoia-button sequoia-button-default" href="" data-ng-if="isSearching" data-ng-click="clear()">&times;</a>\n</form>\n')}]);